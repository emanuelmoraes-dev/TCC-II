\chapter{INTRODUÇÃO}
\label{Introducao}

A grande demanda pela informatização de processos, que antes eram desenvolvidos completamente por humanos e com pouco auxílio de recursos tecnológicos, tem sido bastante crescente. Isto vem estimulando a criação de novas ferramentas para facilitar o desenvolvimento de aplicações que automatizam tais processos. Dentre as características mais comuns no desenvolvimento das mais diversas aplicações, está a necessidade de armazenar, buscar, atualizar e remover dados, popularmente conhecido como CRUD (\textit{Create}, \textit{Read}, \textit{Update} e \textit{Delete}). Dependendo do propósito da aplicação desenvolvida, todas ou algumas dessas operações são utilizadas. Para facilitar e otimizar tais operações, diversos bancos de dados foram desenvolvidos.

%%%%% REMOVIDO %%%%%
% Uma das abordagens mais antigas de armazenamento de dados é a utilização de arquivos de texto, mas com o passar do tempo, gerenciar tais dados dessa maneira se tornou ineficiente. Motivados por esta problemática, os bancos de dados foram criados.
%%%%% REMOVIDO %%%%%

Assim como descrito por \citeonline{date2004introduccao}, um banco de dados é ``um sistema de armazenamento de dados baseado em computador; isto é, um sistema cujo objetivo global é registrar e manter informação''. Assim como demonstrado por \citeonline{davoudian2018survey}, vários tipos diferentes de Banco de Dados foram criados ao longo do tempo. Dentre eles se destaca o modelo relacional, por se tratar de um modelo tradicional. Este define uma estrutura de dados normalizada baseada em tabelas. A linguagem mais comum  utilizada por tais bancos é o SQL (\textit{Structured Query Language}). Tal modelo relacional foi desenvolvido visando a imposição de alguns limites, definidos pelas formas normais. Tais limites normalizam os dados para garantir que, por exemplo, duas ou mais linhas de uma tabela nunca possam representar o mesmo objeto no sistema, ao mesmo tempo que garante que nenhum identificador (chave primária) represente parcialmente a tabela. As formas normais auxiliam em operações como a otimização da quantidade de dados armazenados; otimização da atualização de registros; e criação de regras na própria estrutura de armazenamento, afim de dificultar a inconsistência de dados.

%%%%% REMOVIDO %%%%%
% Um SGBD (Sistema de Gerenciamento de Banco de Dados) é um software capaz de manipular um determinado banco de dados, disponibilizando para o usuário ferramentas de CRUD. Um SGBD realiza todas as operações e tratamentos necessários, fornecendo um \textit{endpoint} de inserção de comandos para o gerenciamento mais simples, consistente e performático da manipulação de dados.
%%%%% REMOVIDO %%%%%

\citeonline{moreno2016performance} descrevem que existe uma enorme demanda para armazenar uma quantidade cada vez maior de dados. Neste cenário, \citeonline{davoudian2018survey} observam que os limites impostos pelas formas normais dificultam a criação de aplicações escaláveis, disponíveis e consistentes. Isso ocorre porque a normalização dificulta o agrupamento de dados relevantes em um único servidor, dificultando a escalabilidade horizontal em servidores distribuídos. Esta característica exige a junção de diversos dados que podem estar fisicamente distantes. Além disso, bancos com uma quantidade muito grande de dados sofrem perdas de performance ao tentar unir tais dados.

Baseado nessa problemática, começaram a surgir novos modelos de armazenamento de dados não relacionai. Estes, objetivam otimizar o armazenamento de dados, cujo o atendimento de suas exigências fosse muito caro, complexo ou inviável para o modelo de banco de dados relacional. Tais modelos ficaram conhecidos como NoSQL.

Atualmente, um dos bancos de dados NoSQL mais populares é o \textit{MongoDB}.
%Isto pode ser visualizado pela grande quantidade de citações à ele na literatura (demonstrado no capítulo \ref{TrabalhosRelacionados}), além da pesquisa feita pela \textit{DB-Engines}\footnote{A pesquisa e a metodologia da pesquisa estão respectivamente disponíveis pelos \textit{links} \url{https://db-engines.com/} e \url{https://db-engines.com/en/ranking_definition}. Acessos ocorridos no dia 16 de dezembro de 2020, às 16:18.} citá-lo como sendo o banco de dados NoSQL mais popular em novembro de 2020.
Tal banco estrutura seus dados baseado em documentos. Esta abordagem quebra várias barreiras limitadas pelo modelo relacional, permitindo que os dados sejam armazenados de maneira não normalizada (desnormalização).

O \textit{MongoDB} permite uma maior flexibilização da estrutura de armazenamento. Isso facilita o armazenamento de dados semi-estruturados e não estruturados, pois tal banco não exige a definição de uma estrutura de armazenamento pré-estabelecida (\textit{schema}), facilitando o armazenamento dados difíceis de se estabelecer um padrão. Além disso, a desnormalização gera um ganho de performance em diversas operações para diversos tipos de aplicações, sendo o IoT (\textit{Internet of Things}) um dos grandes beneficiários por, geralmente, gerenciar grandes volumes de dados. Assim como descrito por \cite{davoudian2018survey}, o armazenamento de dados relevantes em um único local otimiza a escalabilidade horizontal da aplicação, além de evitar a junção dos dados, pois os dados já serão armazenados juntos. Apesar dos benefícios da desnormalização, existem possíveis problemas que podem decorrer mediante seu uso.

Os limites impostos pela normalização tendem a garantir que um determinado valor somente precisará ser alterado em um único lugar. Por outro lado, um banco desnormalizado não garante que um determinado valor estará em um único lugar, podendo exigir buscas possivelmente lentas para a localização de todos os locais onde o dado deve ser atualizado. Por causa de tal problemática, bancos que não seguem o modelo relacional, podem sentir a necessidade de mesclar estratégias de normalização e desnormalização.

O \textit{MongoDB} foi projetado para que os dados possam estar desnormalizados, mas ele, atualmente, não ofereceferramentas de desenvolvimento tão fáceis e intuitivas para gerenciar dados normalizados, quanto aquelas disponibilizadas para dados desnormalizados. Um exemplo disto pode ser observado na operação de junção de documentos descrito pelo trabalho de \citeonline{celesti2019study}. Nele, a junção de documentos no \textit{MongoDB}, por meio de uma operação equivalente ao \textit{inner join} do SQL, tornou-se, não só mais complexo de ser desenvolvido, como apresentou performance inferior em comparação com um banco relacional. Mediante tal cenário, pode-se afirmar que existem operações em dados normalizados que seriam mais simples de serem realizadas usando a linguagem SQL.

%IMPORTANTE
% O termo MongoDB foi bastante utilizado nos últimos parágrafos. Ser der pra cortar alguns seria bom, pra não ficar repetitivo demais já que ele ainda é utilizado em outras partes. Quando está subentendido que vc está falando do MongoBD não há necessidade de repetir.

O desenvolvimento de uma aplicação com \textit{MongoDB} pode exigir um trabalho extra, em comparação a bancos relacionais, pois, as vezes, será necessário realizar junções e buscas em dados normalizados de forma não tão intuitiva quanto o SQL. Além disso, por causa da alta flexibilidade na estruturação dos dados, as diferentes formas como os dados podem ser armazenados exigem tratamentos distintos na implementação de diversas funcionalidades. Dessa forma, se a estrutura dos dados mudar durante o desenvolvimento, as operações de busca e junção de documentos precisarão ser alteradas. Ou seja, haverão mudanças em todas as funcionalidades que estiverem referenciando os dados reestruturados.

%%%%% REMOVIDO %%%%%
% Além dos problemas decorrentes do uso do \textit{MongoDB}, uma aplicação web exige a implementação de um conjunto de funcionalidades que, apesar de serem comuns para este tipo de aplicação, podem exigir muito trabalho para serem desenvolvidas.
%%%%% REMOVIDO %%%%%

Visando a resolução de tais problemas, este trabalho apresenta o desenvolvimento de um \textit{framework} denominado de \textit{Alpha Restful}, criado para desenvolver aplicações com \textit{MongoDB} na linguagem \textit{ECMAScript} 6 (\textit{JavaScript}) e \textit{NodeJS} (no mínimo na versão 8).

%%%REMOVI ESSE PARÁGRAFO (DIEGO)
%Um framework é um conjunto de códigos fonte que oferece camadas de abstração para facilitar o desenvolvimento de um conjunto de funcionalidades disponibilizadas por ele.

O objetivo geral deste trabalho é apresentar o \textit{Alpha Restful} como uma solução capaz de abstrair a implementação de diversas funcionalidades sobre dados normalizados no \textit{MongoDB}. Neste contexto, pretende-se comparar algumas soluções de mercado com o \textit{framework} proposto, através da implementação de algumas funcionalidades. Além disso, objetiva-se mostrar como o \textit{Alpha Restful}
%pode facilitar o desenvolvimento de diversas aplicações.
se sobressai, em alguns requisitos, em comparação às outras ferramentas utilizadas durante os testes com o \textit{framework} proposto.

Dentre todas as funcionalidades do \textit{framework}, as apresentadas nesse trabalho (seções \ref{section: juncao-documentos}, \ref{section: buscas-filtradas-documentos-relacionados}, \ref{section: remocao-cascata-documentos-relacionados}, \ref{section: relacao-dependencia-entre-documentos} e \ref{section: identificadores-apontando-para-lixo}) são muito importantes para a manipulação de dados, usando o \textit{MongoDB}. Outras funcionalidades também foram implementadas, porém seu escopo de atuação está mais intimamente relacionado à web (desenvolvimento da comunicação de aplicações dentro de uma rede local ou global de computadores). Como o escopo desse trabalho é fazer uma análise mais próxima do \textit{MongoDB}, tais funcionalidades foram omitidas nesse documento. Apesar disso, quase todas as funcionalidades desenvolvidas estão disponíveis em um guia de uso gratuito e online\footnote{Disponível pelo link \url{https://www.npmjs.com/package/alpha-restful}}. Por meio do link desse guia, é possível baixar a ferramenta e utilizá-la. Um dos resultados relevantes que pode ser encontrado nesse link é de que até o dia 24/03/2020, mais de 6000 \textit{downloads} foram feitos, desde o seu lançamento na internet (24/02/2019).

%%%%% REMOVIDO %%%%%
% O \textit{Alpha Restful} abstrai a implementação de diversas funcionalidades que precisariam ser desenvolvidas manualmente. O desenvolvimento feito usando tal \textit{framework} torna-se mais simples, pois ele obtém informações sobre a forma como os dados estão armazenados. Essas informações são utilizadas para que diversas funcionalidades sejam abstraídas em implementações mais simples e direcionadas ao que realmente se deseja fazer.
%%%%% REMOVIDO %%%%%

%Finalizar esse parágrafo
Os capítulos seguintes contém mais detalhes do trabalho. No capítulo \ref{TrabalhosRelacionados} temos os trabalhos relacionados. Nele são apresentados trabalhos que contribuem e corroboram para as afirmativas e justificativas aqui apresentadas. No capítulo \ref{FundamentacaoTeorica} é apresentado a fundamentação teórica do trabalho, mostrando as informações técnicas necessárias para compreender o modelo tradicional relacional e o modelo baseado em documentos proposto pelo \textit{MongoDB}. Nele será possível compreender, com mais detalhes, as problemáticas envolvendo ambos os modelos. No capítulo \ref{Metodologia} está presente a metodologia do trabalho, demonstrando como a proposta foi desenvolvida e explanada como solução para os problemas apresentados. No capítulo \ref{Resultados} é demonstrado, através do uso de exemplos práticos, os benefícios do \textit{Alpha Restful}. Para isto, serão exploradas as dificuldades na implementação de 5 funcionalidades selecionadas previamente, comparando o \textit{Alpha Restful} com outras ferramentas já existentes. Tal comparativo evidencia os benefícios adquiridos pelo uso do \textit{framework} proposto. Por fim, no capítulo \ref{Conclusao} encontra-se as conclusões finais deste trabalho.

%O \textit{Alpha Restful} pode ser dividido em 3 camadas de abstração, que serão explicadas posteriormente.

%A primeira camada é a de modelagem. Nela o desenvolvedor irá descrever a forma como os dados serão armazenados. Nesta camada será possível criar um padrão a ser seguido na hora de salvar os dados. Tal padrão irá definir quais dados estarão normalizados, desnormalizados ou parcialmente normalizados. Nesta camada, será possível informar comportamentos específicos para cada valor armazenado.

%Nesta etapa o framework irá gerar metadados (conjunto de dados que descrevem informações sobre a forma como os dados estão estruturados). Tais metadados serão utilizados pelas camadas seguintes a fim de automatizar a implementação de várias funcionalidades. Com os dados da modelagem (descrição feita pelo usuário) e com os metadados (dados gerados pelo \textit{Alpha Restful}), diversas funcionalidades serão implementadas pelo próprio framework, exigindo apenas que o usuário informe informações descritivas na hora de desenvolver tais funções. Por causa de tal abstração, pesquisas podem ser realizadas da mesma maneira, independente dos dados estarem normalizados, desnormalizados ou parcialmente normalizados.

%A segunda camada é a de CRUD automático. Nela o framework poderá criar (bastando apenas a habilitação desta opção) automaticamente todo o CRUD da aplicação. Operações de registro, remoção, atualização e busca serão criados automaticamente, sem que nenhuma codificação seja necessária.

%Nesta etapa, o framework irá implementar uma funcionalidade de busca padrão. Nela, serão utilizados os dados e metadados da modelagem para prever uma enorme quantidade de possibilidades de pesquisas possíveis. A customização desta camada é limitada em um conjunto enumerável de opções. Para aplicações simples, o \textit{Alpha Restful} exigirá apenas a definição da modelagem e o sistema estará pronto.

%Ainda nesta camada, alguns comportamentos padrão serão automaticamente executados, tendo como base as informações definidas na primeira camada. Um destes comportamentos é a relação de dependência entre os documentos. Isto permite que entidades sejam removidas em cascata, ou que sejam desreferenciadas (uma determinada chave estrangeira seja removida de uma entidade relacionada) ou ainda que sejam impedidas de serem removidas tendo como base a remoção de uma outra entidade relacionada.

%A segunda camada é muito poderosa e implementa diversas funcionalidades automaticamente tendo como base a modelagem definida pelo usuário. As customizações podem ser realizadas na modelagem dos dados, mas o número de customizações são finitas e enumeráveis, apesar de bastante poderosas e poderem ser usadas recursivamente.

%Caso a segunda camada não seja o suficiente, é disponibilizado uma terceira camada de abstração. Nela, um conjunto de funcionalidades bastante comuns em aplicações web REST podem ser definidas. Nesta camada, várias funcionalidades poderão ser feitas baseando-se em um padrão descritivo, ou seja, ao invés de o desenvolvedor precisar chamar as funções disponibilizadas pelo \textit{MongoDB}, o próprio framework se encarregará de realizar esta chamada. A única coisa que o desenvolvedor precisará fazer é disponibilizar um objeto que contém a descrição do que ele deseja que seja feito. Esta descrição é algo bem enxuto, tendo em vista que o \textit{Alpha Restful} já conhece a forma pela qual os dados estão estruturados e já possui diversos dados e metadados sobre comportamentos específicos de cada valor salvo definido na camada de modelagem. As pesquisas implementadas nesta camada, por causa de sua abstração, são realizados da mesma maneira, independente dos dados estarem normalizados, desnormalizados ou parcialmente normalizados.

%Imbutino na Introdução
%\section{Objetivos}\subsection{Objetivo Geral}
%\subsection{Objetivos Específicos}

%\section{Organização do Trabalho}